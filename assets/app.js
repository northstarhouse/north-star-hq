(()=>{var ps=Object.defineProperty,gs=Object.defineProperties;var bs=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var At=(s,o,r)=>o in s?ps(s,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[o]=r,p=(s,o)=>{for(var r in o||(o={}))Pt.call(o,r)&&At(s,r,o[r]);if(Ke)for(var r of Ke(o))Ot.call(o,r)&&At(s,r,o[r]);return s},g=(s,o)=>gs(s,bs(o));var Tt=(s,o)=>{var r={};for(var S in s)Pt.call(s,S)&&o.indexOf(S)<0&&(r[S]=s[S]);if(s!=null&&Ke)for(var S of Ke(s))o.indexOf(S)<0&&Ot.call(s,S)&&(r[S]=s[S]);return r};const{useState:C,useEffect:Le,useMemo:$s,useRef:xs}=React,Ft="nsh-strategy-metrics-cache-v1",Mt="nsh-strategy-sections-cache-v1",rt="nsh-strategy-quarterly-cache-v1",jt="nsh-strategy-major-todos-v1",it=!0,X="https://script.google.com/macros/s/AKfycbydaZEpixA_RWAQ42HPsrFe6gCrf5bDYhWbj7COlNwmq-tQOOJaBiivRQfahnGq3WIDeQ/exec",It=X,vs="https://docs.google.com/spreadsheets/d/1l-FsSLYELMM5pMwWS92UgKlwPmsrCmNEe7kmrEaQB6M/edit?gid=0#gid=0",hs="https://docs.google.com/spreadsheets/d/1l-FsSLYELMM5pMwWS92UgKlwPmsrCmNEe7kmrEaQB6M/preview",fs="https://docs.google.com/spreadsheets/d/e/2PACX-1vSTge4UtsTFma1Y4ppSeC5nVORQiTtVLXXysbHUNdf3sOBb372QR9YG3Q9AfUNbGFD3K2Y0FeP4V5P2/pubhtml?gid=0&single=true&widget=false&headers=false&chrome=false",Rt="1l-FsSLYELMM5pMwWS92UgKlwPmsrCmNEe7kmrEaQB6M",$t="1kqVXngOaf_X1lrB6Nbi5U_3NJ4_P_fGMqxhyqdfuDT0",Lt="nsh-sheet-last-seen-v1",Jt=s=>/^https:\/\/script\.google\.com\/macros\/s\/[^/]+\/exec$/i.test(String(s||"").trim()),Ns=()=>{if(!it)return"";if(!X)return"Google Sheets URL is missing.";const s=String(X).trim();return s.includes("/macros/library/")?"Google Sheets URL is a library link. Use the Web App /exec URL instead.":Jt(s)?"":"Google Sheets URL must be the Web App /exec link."};const nt=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fundraising",sheet:"Fundraising"},{key:"events",label:"Events",sheet:"Events"},{key:"marketing-ops",label:"Marketing",sheet:"Marketing"},{key:"venue",label:"Venue",sheet:"Venue"}];const Ls=Array.from({length:11},(s,o)=>o*10),j={isConfigured:()=>it&&Jt(X),postJson:async(s,o)=>{const r=await fetch(s,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(o)});if(!r.ok){const S=await r.text();throw new Error(`Request failed (${r.status}). ${S||"No response body."}`)}return r.json()},uploadFile:async({filename:s,mimeType:o,data:r})=>{if(!It)throw new Error("Drive upload not configured");const S={action:"uploadImage",filename:s,mimeType:o,data:r},Q=await j.postJson(It,S);if(!Q.success)throw new Error(Q.error||"Upload failed");return Q.result},fetchMetrics:async()=>{if(!j.isConfigured())return null;try{const s=await fetch(`${X}?action=getMetrics`);if(!s.ok)throw new Error("Failed to fetch metrics");return(await s.json()).metrics||null}catch(s){return console.error("Error fetching metrics:",s),null}},submitQuarterlyUpdate:async s=>{if(!j.isConfigured())throw new Error("Google Sheets not configured");const o=await j.postJson(X,{action:"submitQuarterlyUpdate",form:s});if(!o.success)throw new Error(o.error||"Submission failed");return o.result},submitReviewUpdate:async s=>{if(!j.isConfigured())throw new Error("Google Sheets not configured");const o=await j.postJson(X,{action:"submitReviewUpdate",review:s});if(!o.success)throw new Error(o.error||"Submission failed");return o.result},fetchQuarterlyUpdates:async()=>{if(!j.isConfigured())return[];try{const s=await fetch(`${X}?action=getQuarterlyUpdates`);if(!s.ok)throw new Error("Failed to fetch quarterly updates");return(await s.json()).updates||[]}catch(s){return console.error("Error fetching quarterly updates:",s),[]}},fetchSectionSnapshots:async()=>{if(!j.isConfigured())return null;try{const s=await fetch(`${X}?action=getSectionSnapshots`);if(!s.ok)throw new Error("Failed to fetch section snapshots");return(await s.json()).sections||null}catch(s){return console.error("Error fetching section snapshots:",s),null}},fetchMajorTodos:async()=>{if(!j.isConfigured())return[];try{const s=await fetch(`${X}?action=getMajorTodos`);if(!s.ok)throw new Error("Failed to fetch major todos");return(await s.json()).todos||[]}catch(s){return console.error("Error fetching major todos:",s),[]}},saveMajorTodo:async s=>{if(!j.isConfigured())return s;try{const o=await j.postJson(X,{action:"saveMajorTodo",todo:s});if(!o.success)throw new Error(o.error||"Save failed");return o.result}catch(o){return console.error("Error saving major todo:",o),s}},deleteMajorTodo:async s=>{if(!j.isConfigured())return{deleted:!0};try{const o=await j.postJson(X,{action:"deleteMajorTodo",id:s});if(!o.success)throw new Error(o.error||"Delete failed");return o.result}catch(o){return console.error("Error deleting major todo:",o),{deleted:!1}}}},qe=s=>{try{const o=localStorage.getItem(s);return o?JSON.parse(o):null}catch(o){return console.warn("Failed to read cache:",o),null}},$e=(s,o)=>{try{localStorage.setItem(s,JSON.stringify(o))}catch(r){console.warn("Failed to write cache:",r)}},ys=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,ws=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(o){return s}},Qt=s=>{if(!s)return"";const o=new Date(s);if(Number.isNaN(o.getTime()))return s;const r=String(o.getMonth()+1).padStart(2,"0"),S=String(o.getDate()).padStart(2,"0"),Q=String(o.getFullYear());return`${r}-${S}-${Q}`};const lt=s=>s==null?"N/A":new Intl.NumberFormat("en-US").format(Number(s)||0),Wt=s=>{if(s==null)return"N/A";const o=Number(s)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(o)},Bt=s=>{if(!s)return"";const o=new Date(s);return Number.isNaN(o.getTime())?"":o.toISOString().slice(0,10)},ks=(s,o=3)=>{const r=[];for(String(s||"").split(`
`).map(Q=>Q.trim()).filter(Boolean).forEach(Q=>{const f=Q.split("|").map(_=>_.trim()),[ee="",de="",W=""]=f;r.push({action:ee,owner:de,deadline:W})});r.length<o;)r.push({action:"",owner:"",deadline:""});return r.slice(0,o)},Ut=s=>s.map(o=>[o.action,o.owner,o.deadline].map(r=>r.trim()).join(" | ")).filter(o=>o.replace(/\|/g,"").trim()!=="").join(`
`);const Ht=({size:s=24})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const Vt=({size:s=22})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"})),Cs=({size:s=24})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 5v14"}),React.createElement("path",{d:"M5 12h14"}));const zt=({size:s=20})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const Ss=({size:s=20})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M20 6L9 17l-5-5"})),_t=({size:s=16})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M3 6h18"}),React.createElement("path",{d:"M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2"}),React.createElement("path",{d:"M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"}));const Es=({areaLabel:s,quarter:o,review:r,onSave:S})=>{const Q=d=>({statusAfterReview:(d==null?void 0:d.statusAfterReview)||"",actionsRows:ks(d==null?void 0:d.actionsAssigned),crossAreaImpacts:(d==null?void 0:d.crossAreaImpacts)||"",areasImpacted:(d==null?void 0:d.areasImpacted)||"",coordinationNeeded:(d==null?void 0:d.coordinationNeeded)||"",priorityConfirmation:(d==null?void 0:d.priorityConfirmation)||"",escalationFlag:(d==null?void 0:d.escalationFlag)||"",reviewCompletedOn:Bt(d==null?void 0:d.reviewCompletedOn),nextCheckInDate:Bt(d==null?void 0:d.nextCheckInDate)}),[f,ee]=C(()=>Q(r)),[de,W]=C(!1),[_,K]=C(!1);Le(()=>{ee(Q(r))},[r,s,o]),Le(()=>{K(!1)},[s,o]);const T=(d,P)=>{ee(F=>g(p({},F),{[d]:P}))},H=(d,P,F)=>{ee(Y=>{const we=Y.actionsRows.map((te,ie)=>ie===d?g(p({},te),{[P]:F}):te);return g(p({},Y),{actionsRows:we})})},pe=async()=>{W(!0);const d=f.crossAreaImpacts==="Affects another area",P={focusArea:s,quarter:o,statusAfterReview:f.statusAfterReview,actionsAssigned:Ut(f.actionsRows),crossAreaImpacts:f.crossAreaImpacts,areasImpacted:d?f.areasImpacted:"",coordinationNeeded:d?f.coordinationNeeded:"",priorityConfirmation:f.priorityConfirmation,escalationFlag:f.escalationFlag,reviewCompletedOn:f.reviewCompletedOn,nextCheckInDate:f.nextCheckInDate};try{await S(P)}catch(F){console.error("Failed to save review:",F),alert("Failed to save review. Please try again.")}W(!1)},z=["On track","Minor adjustments needed","Off track - intervention required"],A=["None","Affects another area"],J=["Approved","Adjusted","Replaced"],u=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];if(!_){const P=[{label:"Status After Review",value:f.statusAfterReview},{label:"Actions Assigned",value:Ut(f.actionsRows)},{label:"Cross-Area Impacts",value:f.crossAreaImpacts},{label:"Area(s) impacted",value:f.areasImpacted},{label:"Coordination needed",value:f.coordinationNeeded},{label:"Priority Confirmation (Next Quarter)",value:f.priorityConfirmation},{label:"Escalation Flag",value:f.escalationFlag},{label:"Review completed on",value:f.reviewCompletedOn},{label:"Next check-in date",value:f.nextCheckInDate}].filter(F=>F.value);return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},o," review"),React.createElement("button",{type:"button",onClick:()=>K(!0),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Edit review")),P.length===0?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No review submitted yet."):React.createElement("div",{className:"mt-4 space-y-2 text-sm text-stone-700"},P.map(F=>React.createElement("div",{key:F.label},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},F.label),React.createElement("div",{className:"whitespace-pre-wrap"},F.value)))))}return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},o," review"),React.createElement("button",{type:"button",onClick:()=>K(!1),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Close")),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},z.map(d=>React.createElement("label",{key:d,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${s}-${o}-status`,value:d,checked:f.statusAfterReview===d,onChange:P=>T("statusAfterReview",P.target.value),className:"accent-clay"}),React.createElement("span",null,d))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},f.actionsRows.map((d,P)=>React.createElement("div",{key:P,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:d.action,onChange:F=>H(P,"action",F.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:d.owner,onChange:F=>H(P,"owner",F.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:d.deadline,onChange:F=>H(P,"deadline",F.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},A.map(d=>React.createElement("label",{key:d,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${s}-${o}-impact`,value:d,checked:f.crossAreaImpacts===d,onChange:P=>T("crossAreaImpacts",P.target.value),className:"accent-clay"}),React.createElement("span",null,d)))),f.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:f.areasImpacted,onChange:d=>T("areasImpacted",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:f.coordinationNeeded,onChange:d=>T("coordinationNeeded",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},J.map(d=>React.createElement("label",{key:d,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${s}-${o}-priority`,value:d,checked:f.priorityConfirmation===d,onChange:P=>T("priorityConfirmation",P.target.value),className:"accent-clay"}),React.createElement("span",null,d))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},u.map(d=>React.createElement("label",{key:d,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${s}-${o}-escalation`,value:d,checked:f.escalationFlag===d,onChange:P=>T("escalationFlag",P.target.value),className:"accent-clay"}),React.createElement("span",null,d))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:f.reviewCompletedOn,onChange:d=>T("reviewCompletedOn",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:f.nextCheckInDate,onChange:d=>T("nextCheckInDate",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:pe,disabled:de,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},de?"Saving...":"Save review")))};const Ds=({onBack:s})=>React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-[0.3em] text-steel"},"Voicemails"),React.createElement("h2",{className:"font-display text-3xl text-ink"},"Honeybook Messages"),React.createElement("p",{className:"text-sm text-stone-500 mt-2"},"Live Google Sheet with a cleaner workspace.")),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("button",{onClick:s,className:"px-4 py-2 rounded-xl border border-stone-200 text-sm text-ink bg-white hover:border-gold/60 transition"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(zt,{size:16}),"Back to Dashboard")),React.createElement("a",{href:vs,target:"_blank",rel:"noreferrer",className:"px-4 py-2 rounded-xl bg-gold text-white text-sm shadow hover:opacity-90 transition"},"Open in Google Sheets"))),React.createElement("div",{className:"grid grid-cols-1 gap-6"},React.createElement("div",{className:"glass rounded-3xl border border-stone-100 card-shadow overflow-hidden"},React.createElement("div",{className:"flex items-center justify-between px-5 py-4 border-b border-stone-100 bg-white/80"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Live sheet"),React.createElement("div",{className:"text-sm text-stone-500"},"Updates as you edit the spreadsheet.")),React.createElement("span",{className:"text-[10px] uppercase tracking-wide text-steel bg-stone-100 px-3 py-1 rounded-full"},"Public")),React.createElement("div",{className:"h-[72vh] md:h-[84vh]"},React.createElement("iframe",{title:"Honeybook Messages",src:hs,className:"w-full h-full border-0 bg-white"}))))),As=({onBack:s})=>React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-[0.3em] text-steel"},"Voicemails"),React.createElement("h2",{className:"font-display text-3xl text-ink"},"Voicemail Log"),React.createElement("p",{className:"text-sm text-stone-500 mt-2"},"Live sheet in a calmer layout.")),React.createElement("div",{className:"flex flex-wrap items-center gap-2"},React.createElement("button",{onClick:s,className:"px-4 py-2 rounded-xl border border-stone-200 text-sm text-ink bg-white hover:border-gold/60 transition"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(zt,{size:16}),"Back to Dashboard")))),React.createElement("div",{className:"grid grid-cols-1 gap-6"},React.createElement("div",{className:"glass rounded-3xl border border-stone-100 card-shadow overflow-hidden"},React.createElement("div",{className:"flex items-center justify-between px-5 py-4 border-b border-stone-100 bg-white/80"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Live sheet"),React.createElement("div",{className:"text-sm text-stone-500"},"Updates as you edit the spreadsheet.")),React.createElement("span",{className:"text-[10px] uppercase tracking-wide text-steel bg-stone-100 px-3 py-1 rounded-full"},"Public")),React.createElement("div",{className:"h-[72vh] md:h-[84vh]"},React.createElement("iframe",{title:"Voicemails",src:fs,className:"w-full h-full border-0 bg-white"}))))),dt=({size:s=24,className:o=""})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o},React.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),React.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),React.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),React.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"})),Ps=({size:s=24,className:o=""})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o},React.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),React.createElement("polyline",{points:"17 8 12 3 7 8"}),React.createElement("line",{x1:"12",y1:"3",x2:"12",y2:"15"})),Os=({size:s=24,className:o=""})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o},React.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),React.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),Ts=({size:s=24,className:o=""})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("polyline",{points:"12 6 12 12 16 14"})),Xe=({size:s=24,className:o=""})=>React.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("path",{d:"M9 12l2 2 4-4"})),Yt=()=>{var Nt,yt,wt,kt,Ct,St,Et,Dt;const[s,o]=C([]),[r,S]=C(null),[Q,f]=C(!1),[ee,de]=C(null),[W,_]=C("marketing"),K=xs(null),[T,H]=C({}),[pe,z]=C(!1),[A,J]=C(new Date().getMonth()),[u,d]=C({}),[P,F]=C(!1),[Y,we]=C(new Date().getMonth()),[te,ie]=C({}),[Fe,he]=C(!1),[oe,Qe]=C(new Date().getMonth()),[Be,ke]=C([]),[Ue,Me]=C(0),[Ve,Ce]=C(!1),O="https://script.google.com/macros/s/AKfycbzcuMhZ1h15zP7IgYhyCBChgkx_mbe23G6756V2_lHNT1grfgKR-AuZxbHt3t806h8-/exec",Se="nsh-events-cache-v1",fe="nsh-event-flyers-v1",_e="nsh-newsletter-cache-v1",Ze="nsh-posting-schedule-v1",i="nsh-press-release-cache-v1",y="nsh-bookings-cache-v1",b=["January","February","March","April","May","June","July","August","September","October","November","December"],h=[{id:"mainFeature",label:"Main Feature"},{id:"mainUpcomingEvent",label:"Main Upcoming Event"},{id:"eventRecaps",label:"Event Recaps / Blogs"},{id:"volunteerHours",label:"Volunteer Monthly Hours"},{id:"donationNeeds",label:"Donation Needs"},{id:"other",label:"Other"}],E=[{id:"headline",label:"Headline"},{id:"summary",label:"Summary / Angle"},{id:"keyDetails",label:"Key Details"},{id:"outlets",label:"Target Outlets"},{id:"link",label:"Link"},{id:"notes",label:"Notes"}],w=[{week:"First Week",items:[{id:"w1-mon",day:"Monday",prompt:"Wedding posting + scheduling for the month"},{id:"w1-tue",day:"Tuesday",prompt:"Testimonial or small history"},{id:"w1-wed",day:"Wednesday",prompt:"OPEN"},{id:"w1-thu",day:"Thursday",prompt:"Monthly email send out"},{id:"w1-fri",day:"Friday",prompt:"Volunteer outreach - events"},{id:"w1-other",day:"Other",prompt:"Other"}]},{week:"Second Week",items:[{id:"w2-mon",day:"Monday",prompt:"Sponsor spotlight"},{id:"w2-tue",day:"Tuesday",prompt:"Upcoming event / tours"},{id:"w2-thu",day:"Thursday",prompt:"Planning update"},{id:"w2-fri",day:"Friday",prompt:"Volunteer outreach - restoration"},{id:"w2-other",day:"Other",prompt:"Other"}]},{week:"Third Week",items:[{id:"w3-mon",day:"Monday",prompt:"Upcoming event or wedding"},{id:"w3-tue",day:"Tuesday",prompt:"OPEN"},{id:"w3-thu",day:"Thursday",prompt:"History update"},{id:"w3-fri",day:"Friday",prompt:"Volunteer outreach - garden"},{id:"w3-other",day:"Other",prompt:"Other"}]},{week:"Fourth Week",items:[{id:"w4-mon",day:"Monday",prompt:"OPEN"},{id:"w4-tue",day:"Tuesday",prompt:"Restoration video"},{id:"w4-thu",day:"Thursday",prompt:"Development / board update"},{id:"w4-fri",day:"Friday",prompt:"Volunteer outreach - docents"},{id:"w4-other",day:"Other",prompt:"Other"}]}],I=w.flatMap(e=>e.items),R=I.reduce((e,t)=>(e[`${t.day} - ${t.prompt}`]=t.id,e),{}),q=w.map(e=>e.items.reduce((t,a)=>(t[`${a.day} - ${a.prompt}`]=a.id,t),{})),ge=e=>{const t=[];return w.forEach(a=>{const n=a.items.map(l=>{const c=((e==null?void 0:e[l.id])||"").trim();return c?`${l.day} - ${l.prompt}: ${c}`:null}).filter(Boolean);n.length&&t.push(a.week,...n,"")}),t.join(`
`).trim()},be=(e,t)=>e.items.map(n=>{const l=((t==null?void 0:t[n.id])||"").trim();return l?`${n.day} - ${n.prompt}: ${l}`:null}).filter(Boolean).join(`
`).trim(),D=(e,t)=>{if(!e)return{};const a=String(e).split(`
`),n=q[t]||{};return a.reduce((l,c)=>{const x=c.trim();if(!x)return l;const ae=x.indexOf(":");if(ae===-1)return l;const m=x.slice(0,ae).trim(),v=x.slice(ae+1).trim(),L=n[m];return L&&(l[L]=v),l},{})},M=e=>e?String(e).split(`
`).reduce((a,n)=>{var v;const l=n.trim();if(!l||/week$/i.test(l))return a;if(l.includes("|")){const L=l.split("|"),ye=(v=L[0])==null?void 0:v.trim();if(ye&&I.some(ue=>ue.id===ye)){const ue=L.slice(2).join("|").trim();return a[ye]=ue,a}}const c=l.indexOf(":");if(c===-1)return a;const x=l.slice(0,c).trim(),ae=l.slice(c+1).trim(),m=R[x];return m&&(a[m]=ae),a},{}):{},k=[{id:"press-release",label:"Create Press Release"},{id:"flyer",label:"Create Flyer"},{id:"website",label:"Make Event Page on Website"},{id:"email",label:"Send Email Blast"},{id:"yubanet",label:"YubaNet (Press Release Only - if worthy)",special:!0,optional:!0},{id:"go-nv",label:"Go Nevada County Calendar"},{id:"arts",label:"Arts Council Calendar"},{id:"chamber",label:"Grass Valley Chamber Newsletter (2 weeks prior)",special:!0,optional:!0},{id:"kvmr",label:"KVMR Calendar"},{id:"fb-event",label:"Facebook Event Page"},{id:"fb-nsh",label:"NSH Facebook Page"},{id:"ig-nsh",label:"NSH Instagram Page"},{id:"nv-peeps",label:"Nevada County Peeps"},{id:"gv-peeps",label:"Grass Valley Peeps"},{id:"lake-wildwood",label:"Lake Wildwood Page"},{id:"nextdoor",label:"NextDoor"},{id:"union-cal",label:"Union Event Calendar"},{id:"union-ad",label:"Union Advertisement ($270 - rare)",special:!0,optional:!0},{id:"other",label:"Other",optional:!0}],B=[{id:"event-type",label:"Event type"},{id:"budget-confirmed",label:"Budget confirmed"},{id:"layout-finalized",label:"Layout finalized"},{id:"av-needs",label:"AV needs"},{id:"power-checked",label:"Power checked"},{id:"rentals-ordered",label:"Rentals ordered"},{id:"food-plan",label:"Food plan"},{id:"alcohol-license",label:"Alcohol license (if applicable)"},{id:"volunteer-roles",label:"Volunteer roles assigned"},{id:"staff-lead",label:"Staff lead assigned"},{id:"checkin-ready",label:"Check-in system ready"},{id:"program-ready",label:"Program / agenda printed or shared"},{id:"signage-ready",label:"Signage ready"}],[N,$]=C({name:"",date:"",time:"",isTBD:!1,goals:"",outcomes:"",advertising:"",totalSpent:"",totalEarned:"",volunteers:"",targetAttendance:"",currentRSVPs:"",flyerImage:null,checklist:{},planningChecklist:{},planningNotes:"",notes:"",postEventAttendance:"",postEventNotes:""}),Ne=async()=>{if(O)try{const e=await fetch(`${O}?action=list`);if(!e.ok)throw new Error(`Sheets load failed: ${e.status}`);const t=await e.json(),a=Array.isArray(t.events)?t.events:[],n=JSON.parse(localStorage.getItem(fe)||"{}"),l=localStorage.getItem(Se),c=l?JSON.parse(l):[],x=Array.isArray(c)?c.reduce((v,L)=>(L&&L.id&&(v[L.id]=L),v),{}):{},m=a.map(v=>{const L=x[v.id],ye=typeof v.checklist=="string"?JSON.parse(v.checklist||"{}"):v.checklist||{},ue=typeof v.planningChecklist=="string"?JSON.parse(v.planningChecklist||"{}"):v.planningChecklist||{},Re=L&&L.planningChecklist?L.planningChecklist:null,at=Object.keys(ue||{}).length===0&&Re?Re:ue,ot=v.planningNotes||L&&L.planningNotes||"",Ge=g(p({},v),{date:tt(v.date),time:st(v.time),checklist:ye,planningChecklist:at,planningNotes:ot,flyerImage:n[v.id]||null});return Re&&Object.keys(ue||{}).length===0&&Pe(Ge),Ge}).filter(v=>{if(!v)return!1;const L=String(v.name||"").trim().length>0,ye=String(v.date||"").trim().length>0,ue=String(v.createdAt||"").trim().length>0,Re=String(v.targetAttendance||"").trim().length>0||String(v.currentRSVPs||"").trim().length>0,at=String(v.notes||"").trim().length>0||String(v.planningNotes||"").trim().length>0,ot=v.checklist&&Object.keys(v.checklist).length>0,Ge=v.planningChecklist&&Object.keys(v.planningChecklist).length>0;return L||ye||ue||Re||at||ot||Ge});o(m),localStorage.setItem(Se,JSON.stringify(m))}catch(e){console.error("Failed to load events from Sheets",e);const t=localStorage.getItem(Se);if(t)try{const a=JSON.parse(t);Array.isArray(a)&&o(a)}catch(a){console.error("Failed to parse cached events",a)}}},re=(e,t)=>({month:t+1,published:!!(e!=null&&e.published),mainFeature:(e==null?void 0:e.mainFeature)||"",mainUpcomingEvent:(e==null?void 0:e.mainUpcomingEvent)||"",eventRecaps:(e==null?void 0:e.eventRecaps)||"",volunteerHours:(e==null?void 0:e.volunteerHours)||"",donationNeeds:(e==null?void 0:e.donationNeeds)||"",other:(e==null?void 0:e.other)||""}),ne=(e,t)=>({month:t+1,published:!!(e!=null&&e.published),headline:(e==null?void 0:e.headline)||"",summary:(e==null?void 0:e.summary)||"",keyDetails:(e==null?void 0:e.keyDetails)||"",outlets:(e==null?void 0:e.outlets)||"",link:(e==null?void 0:e.link)||"",notes:(e==null?void 0:e.notes)||""}),le=(e,t)=>{let a={};if(e&&([e.week1,e.week2,e.week3,e.week4].forEach((l,c)=>{a=p(p({},a),D(l,c))}),e.entries)){let l={};if(typeof e.entries=="string")try{l=JSON.parse(e.entries||"{}")}catch(c){l=M(e.entries)}else l=e.entries;Object.keys(l||{}).forEach(c=>{a[c]||(a[c]=l[c])})}const n=I.reduce((l,c)=>(l[c.id]=a[c.id]||"",l),{});return{month:t+1,completed:!!(e!=null&&e.completed),entries:n}},xe=e=>{localStorage.setItem(_e,JSON.stringify(e))},ce=e=>{localStorage.setItem(Ze,JSON.stringify(e))},Ee=e=>{localStorage.setItem(i,JSON.stringify(e))},U=e=>{localStorage.setItem(y,JSON.stringify(e))},se=async()=>{if(O)try{const e=await fetch(`${O}?action=newsletter_list`);if(!e.ok)throw new Error(`Newsletter load failed: ${e.status}`);const t=await e.json(),n=(Array.isArray(t.entries)?t.entries:[]).reduce((l,c)=>{const x=parseInt(c.month,10);return!Number.isNaN(x)&&x>=1&&x<=12&&(l[x-1]=re(c,x-1)),l},{});H(n),xe(n)}catch(e){console.error("Failed to load newsletter data",e);const t=localStorage.getItem(_e);if(t)try{const a=JSON.parse(t);a&&typeof a=="object"&&H(a)}catch(a){console.error("Failed to parse cached newsletter data",a)}}},V=async()=>{if(O)try{const e=await fetch(`${O}?action=posting_list`);if(!e.ok)throw new Error(`Posting load failed: ${e.status}`);const t=await e.json(),n=(Array.isArray(t.entries)?t.entries:[]).reduce((l,c)=>{const x=parseInt(c.month,10);return!Number.isNaN(x)&&x>=1&&x<=12&&(l[x-1]=le(c,x-1)),l},{});d(n),ce(n)}catch(e){console.error("Failed to load posting schedule",e);const t=localStorage.getItem(Ze);if(t)try{const a=JSON.parse(t);a&&typeof a=="object"&&d(a)}catch(a){console.error("Failed to parse cached posting schedule",a)}}},De=async()=>{if(O)try{const e=await fetch(`${O}?action=press_release_list`);if(!e.ok)throw new Error(`Press release load failed: ${e.status}`);const t=await e.json(),n=(Array.isArray(t.entries)?t.entries:[]).reduce((l,c)=>{const x=parseInt(c.month,10);return!Number.isNaN(x)&&x>=1&&x<=12&&(l[x-1]=ne(c,x-1)),l},{});ie(n),Ee(n)}catch(e){console.error("Failed to load press release data",e);const t=localStorage.getItem(i);if(t)try{const a=JSON.parse(t);a&&typeof a=="object"&&ie(a)}catch(a){console.error("Failed to parse cached press release data",a)}}},Je=async()=>{if(O)try{const e=await fetch(`${O}?action=bookings_list`);if(!e.ok)throw new Error(`Bookings load failed: ${e.status}`);const t=await e.json(),a=Array.isArray(t.entries)?t.entries:[],n=Number.isFinite(t.count)?t.count:a.length;ke(a),Me(n),U(a)}catch(e){console.error("Failed to load bookings data",e);const t=localStorage.getItem(y);if(t)try{const a=JSON.parse(t);Array.isArray(a)&&(ke(a),Me(a.length))}catch(a){console.error("Failed to parse cached bookings data",a)}}},We=async(e,t)=>{if(!O)return;const a=re(t,e);try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"newsletter_upsert",entry:a})})}catch(n){console.error("Failed to save newsletter entry",n)}},ct=async(e,t)=>{if(!O)return;const a=le(t,e),n={month:a.month,completed:a.completed,week1:be(w[0],a.entries),week2:be(w[1],a.entries),week3:be(w[2],a.entries),week4:be(w[3],a.entries),entries:ge(a.entries)};try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"posting_upsert",entry:n})})}catch(l){console.error("Failed to save posting schedule",l)}},mt=async(e,t)=>{if(!O)return;const a=ne(t,e);try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"press_release_upsert",entry:a})})}catch(n){console.error("Failed to save press release entry",n)}},Gt=async e=>{if(O)try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"bookings_update",entry:e})})}catch(t){console.error("Failed to save booking update",t)}},ut=(e,t,a)=>{H(n=>{const l=g(p({},re(n[e],e)),{[t]:a}),c=g(p({},n),{[e]:l});return xe(c),We(e,l),c})},Kt=(e,t,a)=>{d(n=>{const l=le(n[e],e),c=g(p({},l),{entries:g(p({},l.entries),{[t]:a})}),x=g(p({},n),{[e]:c});return ce(x),ct(e,c),x})},qt=(e,t,a)=>{ie(n=>{const l=g(p({},ne(n[e],e)),{[t]:a}),c=g(p({},n),{[e]:l});return Ee(c),mt(e,l),c})},pt=e=>{H(t=>{const a=re(t[e],e),n=g(p({},a),{published:!a.published}),l=g(p({},t),{[e]:n});return xe(l),We(e,n),l})},Xt=e=>{ie(t=>{const a=ne(t[e],e),n=g(p({},a),{published:!a.published}),l=g(p({},t),{[e]:n});return Ee(l),mt(e,n),l})},Zt=e=>{d(t=>{const a=le(t[e],e),n=g(p({},a),{completed:!a.completed}),l=g(p({},t),{[e]:n});return ce(l),ct(e,n),l})},et=(e,t,a)=>{ke(n=>{const l=n.map(x=>x.rowIndex!==e?x:g(p({},x),{[t]:a}));U(l);const c=l.find(x=>x.rowIndex===e);return c&&Gt({rowIndex:c.rowIndex,photoPermission:!!c.photoPermission,link:c.link||"",posted:!!c.posted}),l})},Ae=e=>{localStorage.setItem(Se,JSON.stringify(e))},es=(e,t)=>{if(!e||!t)return;const a=JSON.parse(localStorage.getItem(fe)||"{}");a[e]=t,localStorage.setItem(fe,JSON.stringify(a))},ts=e=>{const t=JSON.parse(localStorage.getItem(fe)||"{}");t[e]&&(delete t[e],localStorage.setItem(fe,JSON.stringify(t)))},Pe=async e=>{if(!O)return;const t=g(p({},e),{checklist:typeof e.checklist=="string"?e.checklist:JSON.stringify(e.checklist||{}),planningChecklist:typeof e.planningChecklist=="string"?e.planningChecklist:JSON.stringify(e.planningChecklist||{}),planningNotes:e.planningNotes||""});try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"upsert",event:t})})}catch(a){console.error("Failed to save event to Sheets",a)}},ss=async e=>{const t=s.filter(a=>a.id!==e);if(o(t),Ae(t),S(null),ts(e),!!O)try{await fetch(O,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"delete",id:e})})}catch(a){console.error("Failed to delete event from Sheets",a)}};Le(()=>{Ne(),se(),V(),De(),Je()},[]);const gt=e=>{if(!e)return null;const n=new Date(e)-new Date;return Math.ceil(n/(1e3*60*60*24))},Is=(e,t)=>!t||t===0?0:Math.round(e/t*100),bt=e=>{const t=k.filter(n=>!n.optional);if(!t.length)return 0;const a=t.filter(n=>e==null?void 0:e[n.id]).length;return Math.round(a/t.length*100)},xt=e=>{const t=Object.values(e||{}).filter(a=>a&&a.done).length;return B.length?Math.round(t/B.length*100):0},as=e=>e>=90?"text-emerald-600":e>=70?"text-stone-600":"text-stone-700",os=e=>e>=90?"On track":e>=70?"Slightly behind":"Needs attention",He=e=>{const t=k.filter(n=>!n.optional);return`${t.filter(n=>e==null?void 0:e[n.id]).length}/${t.length}`},vt=e=>`${Object.values(e||{}).filter(a=>a&&a.done).length}/${B.length}`,rs=e=>I.filter(t=>((e==null?void 0:e[t.id])||"").trim()).length,tt=e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},st=e=>{if(!e)return"";if(/^\d{2}:\d{2}$/.test(e))return e;const t=e.match(/^(\d{1,2}):(\d{2}):\d{2}$/);if(t)return`${t[1].padStart(2,"0")}:${t[2]}`;const a=e.match(/^(\d{1,2}):(\d{2})\s*([AaPp][Mm])$/);if(a){let n=parseInt(a[1],10);const l=a[2],c=a[3].toLowerCase()==="pm";return c&&n<12&&(n+=12),!c&&n===12&&(n=0),`${String(n).padStart(2,"0")}:${l}`}return""},ht=e=>{if(!e)return"";const t=st(e);if(!t)return e;const[a,n]=t.split(":"),l=parseInt(a,10),c=l>=12?"PM":"AM";return`${l%12===0?12:l%12}:${n}${c}`},ns=e=>{if(!e)return"";const t=tt(e);if(!t)return e;const[a,n,l]=t.split("-").map(Number);return new Date(a,n-1,l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},me=new Date().getMonth(),Oe=T[me],ve=Oe&&Oe.published?(me+1)%12:me,Z=T[ve]||re(null,ve),ze=u[me],je=ze&&ze.completed?(me+1)%12:me,ls=le(u[je],je),ft=rs(ls.entries),Ye=te[me],Ie=Ye&&Ye.published?(me+1)%12:me,Te=te[Ie]||ne(null,Ie),ds=e=>{const t=e.target.files[0];if(t){const a=new FileReader;a.onloadend=()=>{$(g(p({},N),{flyerImage:a.result}))},a.readAsDataURL(t)}},is=()=>{const e=g(p({},N),{id:Date.now(),createdAt:new Date().toISOString()}),t=[...s,e];o(t),Ae(t),e.flyerImage&&es(e.id,e.flyerImage),Pe(e),f(!1),$({name:"",date:"",time:"",isTBD:!1,goals:"",outcomes:"",advertising:"",totalSpent:"",totalEarned:"",volunteers:"",targetAttendance:"",currentRSVPs:"",flyerImage:null,checklist:{},planningChecklist:{},planningNotes:"",notes:"",postEventAttendance:"",postEventNotes:""})},cs=(e,t)=>{let a=null;const n=s.map(l=>l.id===e?(a=g(p({},l),{checklist:g(p({},l.checklist),{[t]:!l.checklist[t]})}),a):l);o(n),Ae(n),r&&r.id===e&&a&&S(a),a&&Pe(a)},ms=(e,t)=>{let a=null;const n=s.map(l=>{if(l.id===e){const c=l.planningChecklist||{},x=c[t]||{done:!1,note:""},ae=g(p({},c),{[t]:g(p({},x),{done:!x.done})});return a=g(p({},l),{planningChecklist:ae}),a}return l});o(n),Ae(n),r&&r.id===e&&a&&S(a),a&&Pe(a)},us=(e,t,a)=>{let n=null;const l=s.map(c=>{if(c.id===e){const x=c.planningChecklist||{},ae=x[t]||{done:!1,note:""},m=g(p({},x),{[t]:g(p({},ae),{note:a})});return n=g(p({},c),{planningChecklist:m}),n}return c});o(l),Ae(l),r&&r.id===e&&n&&S(n),n&&Pe(n)},G=(e,t,a)=>{let n=null;const l=s.map(c=>c.id===e?(n=g(p({},c),{[t]:a}),n):c);o(l),Ae(l),r&&r.id===e&&n&&S(n),n&&Pe(n)};if(r){const e=gt(r.date),t=bt(r.checklist),a=xt(r.planningChecklist),n=as(t),l=os(t),c=e!==null&&e<0;return React.createElement("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 via-stone-100 to-amber-50 p-4 sm:p-6"},React.createElement("div",{className:"max-w-4xl mx-auto"},React.createElement("button",{onClick:()=>S(null),className:"mb-6 text-amber-700 hover:text-amber-800 font-medium"},"\u2190 Back to Dashboard"),React.createElement("div",{className:"bg-white rounded-lg shadow-lg border border-stone-200 overflow-hidden",onTouchStart:m=>{K.current=m.touches[0].clientX},onTouchEnd:m=>{if(K.current===null)return;const v=m.changedTouches[0].clientX-K.current;Math.abs(v)>60&&_(v<0?"planning":"marketing"),K.current=null}},r.flyerImage&&React.createElement("div",{className:"w-full h-64 bg-gray-100"},React.createElement("img",{src:r.flyerImage,alt:r.name,className:"w-full h-full object-cover"})),React.createElement("div",{className:"p-8"},React.createElement("div",{className:"mb-6 space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Event Name"),React.createElement("input",{type:"text",value:r.name,onChange:m=>G(r.id,"name",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-2xl font-light text-stone-900",placeholder:"Event name"})),React.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 text-stone-700"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(dt,{size:18}),r.isTBD?React.createElement("span",null,"TBD"):React.createElement(React.Fragment,null,React.createElement("input",{type:"date",value:tt(r.date),onChange:m=>G(r.id,"date",m.target.value),className:"px-3 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm"}),r.time&&React.createElement("span",{className:"text-sm text-stone-700"},"\xB7 ",ht(r.time)))),e!==null&&!c&&React.createElement("div",{className:"flex items-center gap-2"},React.createElement(Ts,{size:18}),React.createElement("span",null,e," days away")))),React.createElement("div",{className:"mb-6 flex w-full rounded-full border border-stone-200 bg-stone-50 p-1 text-xs font-medium"},React.createElement("button",{onClick:()=>_("marketing"),className:`flex-1 rounded-full px-3 py-2 transition-colors ${W==="marketing"?"bg-white text-stone-900 shadow-sm":"text-stone-600"}`},"Marketing"),React.createElement("button",{onClick:()=>_("planning"),className:`flex-1 rounded-full px-3 py-2 transition-colors ${W==="planning"?"bg-white text-stone-900 shadow-sm":"text-stone-600"}`},"Event Planning")),W==="marketing"&&React.createElement(React.Fragment,null,!c&&React.createElement("div",{className:"mb-8 p-6 bg-gradient-to-br from-stone-50 to-stone-100 rounded-lg border border-stone-200 shadow-sm"},React.createElement("div",{className:"flex justify-between items-center mb-3"},React.createElement("span",{className:"text-sm font-medium text-stone-900"},"Marketing Progress"),React.createElement("span",{className:`text-sm font-medium ${n}`},l)),React.createElement("div",{className:"flex items-center gap-4 mb-2"},React.createElement("div",{className:"flex-1 h-3 bg-white rounded-full overflow-hidden shadow-inner"},React.createElement("div",{className:"h-full bg-gradient-to-r from-amber-400 via-amber-500 to-amber-400 transition-all duration-500",style:{width:`${Math.min(t,100)}%`}})),React.createElement("span",{className:"text-lg font-light text-stone-900"},t,"%")),React.createElement("div",{className:"text-sm text-stone-700"},He(r.checklist)," marketing tasks"),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-200"},React.createElement("p",{className:"text-sm text-stone-800 mb-3"},"You're ",e>14?`${e} days out`:e>7?"two weeks out":"one week out"," and have completed ",He(r.checklist)," marketing tasks (",t,"%). Attendance is ",r.currentRSVPs||0," of ",r.targetAttendance||0,"."))),React.createElement("div",{className:"mb-8"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Marketing Checklist"),React.createElement("span",{className:"text-sm text-stone-600 font-medium"},He(r.checklist)," complete")),React.createElement("div",{className:"space-y-2"},k.map(m=>React.createElement("label",{key:m.id,className:"flex items-start sm:items-center gap-3 p-3 hover:bg-stone-50 rounded-md cursor-pointer transition-colors"},React.createElement("input",{type:"checkbox",checked:r.checklist[m.id]||!1,onChange:()=>cs(r.id,m.id),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-400"}),React.createElement("span",{className:`flex-1 ${r.checklist[m.id]?"line-through text-gray-400":"text-stone-800"} ${m.special?"text-sm italic":""}`},m.label))))),React.createElement("div",{className:"mb-8"},React.createElement("h2",{className:"text-xl font-light text-stone-900 mb-4"},"Event Details"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Time"),React.createElement("input",{type:"time",value:st(r.time)||"",onChange:m=>G(r.id,"time",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Event time"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Goals"),React.createElement("input",{type:"text",value:r.goals||"",onChange:m=>G(r.id,"goals",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"What is this event aiming to achieve?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Outcomes"),React.createElement("textarea",{value:r.outcomes||"",onChange:m=>G(r.id,"outcomes",m.target.value),rows:3,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Key outcomes or takeaways"})))),React.createElement("div",{className:"mb-8"},React.createElement("h2",{className:"text-xl font-light text-stone-900 mb-4"},"Budget & Promotion"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Advertising"),React.createElement("input",{type:"text",value:r.advertising||"",onChange:m=>G(r.id,"advertising",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Channels, partners, or placements"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Volunteers"),React.createElement("input",{type:"text",value:r.volunteers||"",onChange:m=>G(r.id,"volunteers",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Names or count"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Total Spent"),React.createElement("input",{type:"number",value:r.totalSpent||"",onChange:m=>G(r.id,"totalSpent",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"0"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Total Earned"),React.createElement("input",{type:"number",value:r.totalEarned||"",onChange:m=>G(r.id,"totalEarned",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"0"})))),React.createElement("div",{className:"mb-8"},React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Current RSVPs / Tickets"),React.createElement("input",{type:"number",value:r.currentRSVPs,onChange:m=>G(r.id,"currentRSVPs",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Update attendance count"})),React.createElement("div",{className:"mb-8"},React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Notes"),React.createElement("textarea",{value:r.notes,onChange:m=>G(r.id,"notes",m.target.value),rows:4,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Ongoing thoughts and planning notes..."})),React.createElement("div",{className:"border-t border-stone-200 pt-8"},React.createElement("h2",{className:"text-xl font-light text-stone-900 mb-4"},"Post-Event Reflection"),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Actual Attendance"),React.createElement("input",{type:"number",value:r.postEventAttendance,onChange:m=>G(r.id,"postEventAttendance",m.target.value),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Final attendance count"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Reflection Notes"),React.createElement("textarea",{value:r.postEventNotes,onChange:m=>G(r.id,"postEventNotes",m.target.value),rows:4,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"What worked well? What would you change? Key takeaways..."})))),React.createElement("div",{className:"mt-8 flex justify-end"},React.createElement("button",{onClick:()=>ss(r.id),className:"px-4 py-2 border border-stone-300 text-stone-700 rounded-md hover:bg-stone-100 transition-colors"},"Delete Event"))),W==="planning"&&React.createElement("div",{className:"mb-8 space-y-6"},React.createElement("div",{className:"bg-white rounded-lg border border-stone-200 shadow-sm p-6"},React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Planning Notes"),React.createElement("textarea",{value:r.planningNotes||"",onChange:m=>G(r.id,"planningNotes",m.target.value),rows:4,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"General info, reminders, or planning thoughts..."})),React.createElement("div",{className:"bg-white rounded-lg border border-stone-200 shadow-sm p-6 cursor-pointer hover:border-amber-300 transition-colors",onClick:()=>z(!0)},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",null,React.createElement("h3",{className:"text-sm font-medium text-stone-900"},"Newsletter Content"),React.createElement("p",{className:"text-xs text-stone-500"},"Showing ",b[ve])),React.createElement("button",{type:"button",className:"text-xs text-amber-700 font-medium",onClick:m=>{m.stopPropagation(),z(!0)}},"Open")),React.createElement("div",{className:"text-sm text-stone-700"},Z.mainFeature||Z.mainUpcomingEvent||Z.eventRecaps||Z.volunteerHours||Z.donationNeeds||Z.other||"Add the monthly overview and details."),React.createElement("div",{className:"mt-3 text-xs text-stone-500"},Oe&&Oe.published?`Published - previewing ${b[ve]}`:`Draft - ${b[ve]}`)),React.createElement("div",{className:"p-6 bg-gradient-to-br from-stone-50 to-stone-100 rounded-lg border border-stone-200 shadow-sm"},React.createElement("div",{className:"flex justify-between items-center mb-3"},React.createElement("span",{className:"text-sm font-medium text-stone-900"},"Event Planning Progress"),React.createElement("span",{className:"text-sm font-medium text-stone-700"},a,"%")),React.createElement("div",{className:"flex items-center gap-4 mb-4"},React.createElement("div",{className:"flex-1 h-3 bg-white rounded-full overflow-hidden shadow-inner"},React.createElement("div",{className:"h-full bg-gradient-to-r from-amber-400 via-amber-500 to-amber-400 transition-all duration-500",style:{width:`${Math.min(a,100)}%`}})),React.createElement("span",{className:"text-lg font-light text-stone-900"},a,"%")),React.createElement("div",{className:"text-sm text-stone-700 mb-4"},vt(r.planningChecklist)," planning tasks"),React.createElement("div",{className:"space-y-3"},B.map(m=>{const v=(r.planningChecklist||{})[m.id]||{done:!1,note:""};return React.createElement("div",{key:m.id,className:"flex flex-col sm:flex-row sm:items-center gap-3 rounded-md bg-white p-3 border border-stone-200"},React.createElement("label",{className:"flex items-center gap-3"},React.createElement("input",{type:"checkbox",checked:v.done||!1,onChange:()=>ms(r.id,m.id),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-400"}),React.createElement("span",{className:`text-sm ${v.done?"line-through text-gray-400":"text-stone-800"}`},m.label)),React.createElement("input",{type:"text",value:v.note||"",onChange:L=>us(r.id,m.id,L.target.value),className:"flex-1 px-3 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm",placeholder:"Notes"}))})))),pe&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-stone-200"},React.createElement("div",{className:"p-6 border-b border-stone-200 flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Newsletter Content"),React.createElement("p",{className:"text-xs text-stone-500"},"Edit month-by-month content for the newsletter.")),React.createElement("button",{type:"button",className:"text-sm text-stone-600 hover:text-stone-800",onClick:()=>z(!1)},"Close")),React.createElement("div",{className:"p-6 space-y-6"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>J((A+11)%12)},"Prev"),React.createElement("div",{className:"text-sm font-medium text-stone-900"},b[A]),React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>J((A+1)%12)},"Next")),React.createElement("button",{type:"button",className:`px-3 py-2 rounded-md text-sm font-medium border inline-flex items-center gap-2 ${(Nt=T[A])!=null&&Nt.published?"border-emerald-200 text-emerald-700 bg-emerald-50":"border-stone-200 text-stone-600 hover:bg-stone-50"}`,onClick:()=>pt(A)},(yt=T[A])!=null&&yt.published?React.createElement(React.Fragment,null,React.createElement(Xe,{size:16}),"Published"):"Mark as Published")),React.createElement("div",{className:"space-y-4"},h.map(m=>{var v;return React.createElement("div",{key:m.id,className:"flex flex-col sm:flex-row gap-3"},React.createElement("div",{className:"text-sm font-medium text-stone-900 sm:w-48 pt-2"},m.label),React.createElement("textarea",{value:((v=T[A])==null?void 0:v[m.id])||"",onChange:L=>ut(A,m.id,L.target.value),rows:3,className:"flex-1 px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm",placeholder:`Add ${m.label.toLowerCase()}...`}))})))))))))}return React.createElement("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 via-stone-100 to-amber-50 p-4 sm:p-6"},React.createElement("div",{className:"max-w-6xl mx-auto"},React.createElement("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8"},React.createElement("div",null,React.createElement("h1",{className:"text-4xl font-light text-stone-900 mb-2"},"North Star House"),React.createElement("p",{className:"text-stone-700"},"Event Management")),React.createElement("button",{onClick:()=>f(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-[#886c44] text-white rounded-md hover:bg-[#755a38] transition-all shadow-md w-full md:w-auto"},React.createElement(Os,{size:20}),"New Event")),Q&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 sm:p-6 z-50"},React.createElement("div",{className:"bg-gradient-to-br from-white to-stone-50 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 sm:p-8 border border-stone-200"},React.createElement("h2",{className:"text-2xl font-light text-stone-900 mb-6"},"Create New Event"),React.createElement("div",{className:"space-y-6"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Event Name"),React.createElement("input",{type:"text",value:N.name,onChange:e=>$(g(p({},N),{name:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Event name"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Date"),React.createElement("input",{type:"date",value:N.date,onChange:e=>$(g(p({},N),{date:e.target.value,isTBD:!1})),disabled:N.isTBD,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent disabled:bg-gray-100 bg-white"}),React.createElement("label",{className:"flex items-center gap-2 mt-2"},React.createElement("input",{type:"checkbox",checked:N.isTBD,onChange:e=>$(g(p({},N),{isTBD:e.target.checked,date:""})),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-400"}),React.createElement("span",{className:"text-sm text-stone-700"},"Date TBD"))),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Time"),React.createElement("input",{type:"time",value:N.time,onChange:e=>$(g(p({},N),{time:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Event time"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Goals"),React.createElement("input",{type:"text",value:N.goals,onChange:e=>$(g(p({},N),{goals:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"What is this event aiming to achieve?"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Outcomes"),React.createElement("textarea",{value:N.outcomes,onChange:e=>$(g(p({},N),{outcomes:e.target.value})),rows:3,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Key outcomes or takeaways"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Advertising"),React.createElement("input",{type:"text",value:N.advertising,onChange:e=>$(g(p({},N),{advertising:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Channels, partners, or placements"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Total Spent"),React.createElement("input",{type:"number",value:N.totalSpent,onChange:e=>$(g(p({},N),{totalSpent:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"0"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Total Earned"),React.createElement("input",{type:"number",value:N.totalEarned,onChange:e=>$(g(p({},N),{totalEarned:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"0"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Volunteers"),React.createElement("input",{type:"text",value:N.volunteers,onChange:e=>$(g(p({},N),{volunteers:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Names or count"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Target Attendance"),React.createElement("input",{type:"number",value:N.targetAttendance,onChange:e=>$(g(p({},N),{targetAttendance:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Expected number of attendees"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Current RSVPs / Tickets"),React.createElement("input",{type:"number",value:N.currentRSVPs,onChange:e=>$(g(p({},N),{currentRSVPs:e.target.value})),className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white",placeholder:"Current count"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-stone-900 mb-2"},"Flyer / Event Image"),React.createElement("div",{className:"flex items-center gap-4"},React.createElement("label",{className:"flex items-center gap-2 px-4 py-2 border border-stone-200 rounded-md cursor-pointer hover:bg-stone-50 transition-colors"},React.createElement(Ps,{size:18,className:"text-stone-600"}),React.createElement("span",{className:"text-sm text-stone-800"},"Upload Image"),React.createElement("input",{type:"file",accept:"image/*",onChange:ds,className:"hidden"})),N.flyerImage&&React.createElement("img",{src:N.flyerImage,alt:"Preview",className:"h-16 w-16 object-cover rounded-md border border-stone-200 shadow-sm"}))),React.createElement("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4"},React.createElement("button",{onClick:is,disabled:!N.name,className:"flex-1 px-6 py-3 bg-[#886c44] text-white rounded-md hover:bg-[#755a38] disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md"},"Create Event"),React.createElement("button",{onClick:()=>f(!1),className:"px-6 py-3 border border-stone-300 text-stone-800 rounded-md hover:bg-stone-50 transition-colors"},"Cancel"))))),s.length===0?React.createElement("div",{className:"text-center py-16 bg-white rounded-lg border border-stone-200 shadow-sm"},React.createElement(dt,{size:48,className:"mx-auto text-stone-300 mb-4"}),React.createElement("p",{className:"text-stone-700 mb-2"},"No events yet"),React.createElement("p",{className:"text-sm text-stone-500"},"Create your first event to get started")):React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5"},s.map(e=>{const t=gt(e.date),a=bt(e.checklist),n=t!==null&&t<0,l=xt(e.planningChecklist);return React.createElement("div",{key:e.id,onClick:()=>S(e),className:"bg-white rounded-lg shadow-md border border-stone-200 overflow-hidden cursor-pointer hover:shadow-lg hover:border-amber-400 transition-all"},e.flyerImage&&React.createElement("div",{className:"w-full h-40 bg-gradient-to-br from-stone-100 to-amber-100"},React.createElement("img",{src:e.flyerImage,alt:e.name,className:"w-full h-full object-cover"})),React.createElement("div",{className:"p-5"},React.createElement("h3",{className:"text-lg font-medium text-stone-900 mb-2"},e.name),React.createElement("div",{className:"flex items-center justify-between text-sm text-stone-700 mb-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(dt,{size:14}),React.createElement("span",null,e.isTBD?"TBD":`${ns(e.date)}${e.time?` \xB7 ${ht(e.time)}`:""}`)),t!==null&&!n&&React.createElement("span",{className:"text-xs text-stone-500"},t," days")),!n&&React.createElement("div",{className:"mt-3 space-y-2 text-xs text-stone-600"},(e.targetAttendance||e.currentRSVPs)&&React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",null,"Goal / Current"),React.createElement("span",{className:"font-medium text-stone-800"},e.targetAttendance||0," / ",e.currentRSVPs||0)),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",null,"Marketing progress"),React.createElement("span",{className:"font-medium text-stone-800"},a,"%")),React.createElement("div",{className:"h-2 bg-stone-100 rounded-full overflow-hidden shadow-inner"},React.createElement("div",{className:"h-full bg-gradient-to-r from-amber-400 via-amber-500 to-amber-400 transition-all duration-500",style:{width:`${Math.min(a,100)}%`}})),React.createElement("div",{className:"text-[11px] text-stone-500"},He(e.checklist)," tasks"),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",null,"Event planning progress"),React.createElement("span",{className:"font-medium text-stone-800"},l,"%")),React.createElement("div",{className:"h-2 bg-stone-100 rounded-full overflow-hidden shadow-inner"},React.createElement("div",{className:"h-full bg-gradient-to-r from-amber-400 via-amber-500 to-amber-400 transition-all duration-500",style:{width:`${Math.min(l,100)}%`}})),React.createElement("div",{className:"text-[11px] text-stone-500"},vt(e.planningChecklist)," tasks")),n&&React.createElement("div",{className:"text-xs text-stone-500"},"Past event")))})),React.createElement("div",{className:"mt-10 bg-white rounded-lg border border-stone-200 shadow-sm p-6"},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-medium text-stone-900"},"Newsletter Content"),React.createElement("p",{className:"text-xs text-stone-500"},"Current focus: ",b[ve])),React.createElement("button",{type:"button",className:"text-xs text-amber-700 font-medium",onClick:()=>z(!0)},"Open")),React.createElement("div",{className:"text-sm text-stone-700"},Z.mainFeature||Z.mainUpcomingEvent||Z.eventRecaps||Z.volunteerHours||Z.donationNeeds||Z.other||"Add the monthly overview and details."),React.createElement("div",{className:"mt-3 text-xs text-stone-500"},Oe&&Oe.published?`Published - previewing ${b[ve]}`:`Draft - ${b[ve]}`)),React.createElement("div",{className:"mt-6 bg-white rounded-lg border border-stone-200 shadow-sm p-6"},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-medium text-stone-900"},"Press Releases"),React.createElement("p",{className:"text-xs text-stone-500"},"Goal: 1 per month - Current focus: ",b[Ie])),React.createElement("button",{type:"button",className:"text-xs text-amber-700 font-medium",onClick:()=>he(!0)},"Open")),React.createElement("div",{className:"text-sm text-stone-700"},Te.headline||Te.summary||Te.keyDetails||Te.outlets||Te.link||Te.notes||"Outline the monthly press release."),React.createElement("div",{className:"mt-3 text-xs text-stone-500"},Ye&&Ye.published?`Sent - previewing ${b[Ie]}`:`Draft - ${b[Ie]}`)),React.createElement("div",{className:"mt-6 bg-white rounded-lg border border-stone-200 shadow-sm p-6"},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-medium text-stone-900"},"Monthly Posting Schedule"),React.createElement("p",{className:"text-xs text-stone-500"},"Current focus: ",b[je])),React.createElement("button",{type:"button",className:"text-xs text-amber-700 font-medium",onClick:()=>F(!0)},"Open")),React.createElement("div",{className:"text-sm text-stone-700"},ft>0?`${ft}/${I.length} prompts filled.`:"Add what you posted this month."),React.createElement("div",{className:"mt-3 text-xs text-stone-500"},ze&&ze.completed?`Completed - previewing ${b[je]}`:`In progress - ${b[je]}`)),React.createElement("div",{className:"mt-6 bg-white rounded-lg border border-stone-200 shadow-sm p-6"},React.createElement("div",{className:"flex items-start justify-between gap-4 mb-2"},React.createElement("div",null,React.createElement("h2",{className:"text-lg font-medium text-stone-900"},"Events Booked"),React.createElement("p",{className:"text-xs text-stone-500"},Ue," event",Ue===1?"":"s"," booked")),React.createElement("button",{type:"button",className:"text-xs text-amber-700 font-medium",onClick:()=>Ce(!0)},"Open")),React.createElement("div",{className:"text-sm text-stone-700"},"Review photo permissions, links, and socials status."))),pe&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-stone-200"},React.createElement("div",{className:"p-6 border-b border-stone-200 flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Newsletter Content"),React.createElement("p",{className:"text-xs text-stone-500"},"Edit month-by-month content for the newsletter.")),React.createElement("button",{type:"button",className:"text-sm text-stone-600 hover:text-stone-800",onClick:()=>z(!1)},"Close")),React.createElement("div",{className:"p-6 space-y-6"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>J((A+11)%12)},"Prev"),React.createElement("div",{className:"text-sm font-medium text-stone-900"},b[A]),React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>J((A+1)%12)},"Next")),React.createElement("button",{type:"button",className:`px-3 py-2 rounded-md text-sm font-medium border inline-flex items-center gap-2 ${(wt=T[A])!=null&&wt.published?"border-emerald-200 text-emerald-700 bg-emerald-50":"border-stone-200 text-stone-600 hover:bg-stone-50"}`,onClick:()=>pt(A)},(kt=T[A])!=null&&kt.published?React.createElement(React.Fragment,null,React.createElement(Xe,{size:16}),"Published"):"Mark as Published")),React.createElement("div",{className:"space-y-4"},h.map(e=>{var t;return React.createElement("div",{key:e.id,className:"flex flex-col sm:flex-row gap-3"},React.createElement("div",{className:"text-sm font-medium text-stone-900 sm:w-48 pt-2"},e.label),React.createElement("textarea",{value:((t=T[A])==null?void 0:t[e.id])||"",onChange:a=>ut(A,e.id,a.target.value),rows:3,className:"flex-1 px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm",placeholder:`Add ${e.label.toLowerCase()}...`}))}))))),Fe&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-stone-200"},React.createElement("div",{className:"p-6 border-b border-stone-200 flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Press Releases"),React.createElement("p",{className:"text-xs text-stone-500"},"Plan month-by-month press releases.")),React.createElement("button",{type:"button",className:"text-sm text-stone-600 hover:text-stone-800",onClick:()=>he(!1)},"Close")),React.createElement("div",{className:"p-6 space-y-6"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>Qe((oe+11)%12)},"Prev"),React.createElement("div",{className:"text-sm font-medium text-stone-900"},b[oe]),React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>Qe((oe+1)%12)},"Next")),React.createElement("button",{type:"button",className:`px-3 py-2 rounded-md text-sm font-medium border inline-flex items-center gap-2 ${(Ct=te[oe])!=null&&Ct.published?"border-emerald-200 text-emerald-700 bg-emerald-50":"border-stone-200 text-stone-600 hover:bg-stone-50"}`,onClick:()=>Xt(oe)},(St=te[oe])!=null&&St.published?React.createElement(React.Fragment,null,React.createElement(Xe,{size:16}),"Sent"):"Mark as Sent")),React.createElement("div",{className:"space-y-4"},E.map(e=>{var t;return React.createElement("div",{key:e.id,className:"flex flex-col sm:flex-row gap-3"},React.createElement("div",{className:"text-sm font-medium text-stone-900 sm:w-48 pt-2"},e.label),React.createElement("textarea",{value:((t=te[oe])==null?void 0:t[e.id])||"",onChange:a=>qt(oe,e.id,a.target.value),rows:3,className:"flex-1 px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm",placeholder:`Add ${e.label.toLowerCase()}...`}))}))))),P&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-stone-200"},React.createElement("div",{className:"p-6 border-b border-stone-200 flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Monthly Posting Schedule"),React.createElement("p",{className:"text-xs text-stone-500"},"Track what you actually posted each week.")),React.createElement("button",{type:"button",className:"text-sm text-stone-600 hover:text-stone-800",onClick:()=>F(!1)},"Close")),React.createElement("div",{className:"p-6 space-y-6"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>we((Y+11)%12)},"Prev"),React.createElement("div",{className:"text-sm font-medium text-stone-900"},b[Y]),React.createElement("button",{type:"button",className:"px-3 py-2 border border-stone-200 rounded-md text-sm text-stone-600 hover:bg-stone-50",onClick:()=>we((Y+1)%12)},"Next")),React.createElement("button",{type:"button",className:`px-3 py-2 rounded-md text-sm font-medium border inline-flex items-center gap-2 ${(Et=u[Y])!=null&&Et.completed?"border-emerald-200 text-emerald-700 bg-emerald-50":"border-stone-200 text-stone-600 hover:bg-stone-50"}`,onClick:()=>Zt(Y)},(Dt=u[Y])!=null&&Dt.completed?React.createElement(React.Fragment,null,React.createElement(Xe,{size:16}),"Completed"):"Mark as Complete")),w.map(e=>React.createElement("div",{key:e.week,className:"space-y-4"},React.createElement("h3",{className:"text-sm font-semibold text-stone-900"},e.week),React.createElement("div",{className:"space-y-3"},e.items.map(t=>{var a,n;return React.createElement("div",{key:t.id,className:"flex flex-col gap-2 rounded-md border border-stone-200 p-3"},React.createElement("div",{className:"text-sm font-medium text-stone-800"},t.day," - ",t.prompt),React.createElement("textarea",{value:((n=(a=u[Y])==null?void 0:a.entries)==null?void 0:n[t.id])||"",onChange:l=>Kt(Y,t.id,l.target.value),rows:2,className:"w-full px-4 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm",placeholder:"What you posted or did..."}))}))))))),Ve&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto border border-stone-200"},React.createElement("div",{className:"p-6 border-b border-stone-200 flex items-center justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-light text-stone-900"},"Events Booked"),React.createElement("p",{className:"text-xs text-stone-500"},"Manage photo permissions and social posting status.")),React.createElement("button",{type:"button",className:"text-sm text-stone-600 hover:text-stone-800",onClick:()=>Ce(!1)},"Close")),React.createElement("div",{className:"p-6"},Be.length===0?React.createElement("div",{className:"text-sm text-stone-600"},"No bookings found."):React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"min-w-[720px] w-full text-sm"},React.createElement("thead",null,React.createElement("tr",{className:"text-left text-stone-500 border-b border-stone-200"},React.createElement("th",{className:"py-2 pr-3 font-medium"},"Name"),React.createElement("th",{className:"py-2 pr-3 font-medium"},"Type"),React.createElement("th",{className:"py-2 pr-3 font-medium"},"Photo Permission"),React.createElement("th",{className:"py-2 pr-3 font-medium"},"Link / Photographer"),React.createElement("th",{className:"py-2 pr-3 font-medium"},"Posted to Socials"))),React.createElement("tbody",{className:"text-stone-800"},Be.map(e=>React.createElement("tr",{key:e.rowIndex,className:"border-b border-stone-100"},React.createElement("td",{className:"py-3 pr-3 align-top"},e.name||"\u2014"),React.createElement("td",{className:"py-3 pr-3 align-top"},e.type||"\u2014"),React.createElement("td",{className:"py-3 pr-3 align-top"},React.createElement("label",{className:"inline-flex items-center gap-2 text-xs text-stone-600"},React.createElement("input",{type:"checkbox",checked:!!e.photoPermission,onChange:t=>et(e.rowIndex,"photoPermission",t.target.checked),className:"h-4 w-4 rounded border-stone-300 text-amber-600 focus:ring-amber-400"}),"Permission granted")),React.createElement("td",{className:"py-3 pr-3 align-top"},React.createElement("input",{type:"text",value:e.link||"",onChange:t=>et(e.rowIndex,"link",t.target.value),placeholder:"Add link or photographer",className:"w-full px-3 py-2 border border-stone-200 rounded-md focus:ring-2 focus:ring-amber-400 focus:border-transparent bg-white text-sm"})),React.createElement("td",{className:"py-3 pr-3 align-top"},React.createElement("label",{className:"inline-flex items-center gap-2 text-xs text-stone-600"},React.createElement("input",{type:"checkbox",checked:!!e.posted,onChange:t=>et(e.rowIndex,"posted",t.target.checked),className:"h-4 w-4 rounded border-stone-300 text-amber-600 focus:ring-amber-400"}),"Posted")))))))))))};var Qs=Yt;const Fs=({metrics:s,majorTodos:o,onAddTodo:r,onToggleTodo:S,onDeleteTodo:Q,onOpenHoneybook:f,onOpenVoicemails:ee,unreadHoneybook:de,unreadVoicemails:W})=>{const[_,K]=C(""),T=()=>{const u=_.trim();u&&(r(u),K(""))},H=u=>{u.key==="Enter"&&T()},pe=o.filter(u=>!u.done),z=o.filter(u=>u.done),A={"Events booked":"https://northstarhouse.github.io/north-star-bookings-log/",Volunteers:"https://northstarhouse.github.io/Volunteer-Database/","Donation total":"https://northstarhouse.github.io/donation-database/",Sponsors:"https://northstarhouse.github.io/donation-database/"},J={"Donation total":"Goal: $75,000","Events booked":"Goal: 45",Sponsors:"Goal: 15"};return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-gold mb-4"},React.createElement(Ht,{size:28}),React.createElement("span",{className:"text-sm uppercase tracking-[0.25em] font-semibold"},"Mission Control")),React.createElement("div",{className:"flex gap-2 mb-4"},React.createElement("input",{type:"text",value:_,onChange:u=>K(u.target.value),onKeyDown:H,placeholder:"Add a major focus item...",className:"flex-1 rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-gold/50 focus:border-gold placeholder:text-stone-400"}),React.createElement("button",{onClick:T,disabled:!_.trim(),className:"bg-gold text-white rounded-xl px-4 py-2.5 text-sm font-medium transition hover:opacity-90 disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-1.5"},React.createElement(Cs,{size:16}),"Add")),React.createElement("div",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-1"},pe.length===0&&z.length===0&&React.createElement("p",{className:"text-stone-400 text-sm text-center py-4"},"No items yet. Add your first major focus above."),pe.map(u=>React.createElement("div",{key:u.id,className:"flex items-center gap-3 group bg-white rounded-xl border border-stone-100 px-4 py-3 transition hover:border-gold/30"},React.createElement("button",{onClick:()=>S(u.id),className:"w-5 h-5 rounded-md border-2 border-stone-300 flex-shrink-0 transition hover:border-gold flex items-center justify-center","aria-label":"Mark complete"}),React.createElement("span",{className:"text-sm text-ink flex-1"},u.text),React.createElement("button",{onClick:()=>Q(u.id),className:"opacity-0 group-hover:opacity-60 hover:!opacity-100 text-stone-400 hover:text-red-500 transition flex-shrink-0","aria-label":"Delete item"},React.createElement(_t,{size:14})))),z.length>0&&React.createElement("div",{className:"pt-2 border-t border-stone-100 mt-3"},React.createElement("p",{className:"text-[10px] uppercase tracking-wide text-stone-400 mb-2"},"Completed"),z.map(u=>React.createElement("div",{key:u.id,className:"flex items-center gap-3 group rounded-xl px-4 py-2.5 transition"},React.createElement("button",{onClick:()=>S(u.id),className:"w-5 h-5 rounded-md bg-gold/20 border-2 border-gold/40 flex-shrink-0 flex items-center justify-center text-gold","aria-label":"Mark incomplete"},React.createElement(Ss,{size:12})),React.createElement("span",{className:"text-sm text-stone-400 line-through flex-1"},u.text,u.completedAt&&React.createElement("span",{className:"ml-2 text-[10px] text-stone-300 no-underline inline-block",style:{textDecoration:"none"}},ws(u.completedAt))),React.createElement("button",{onClick:()=>Q(u.id),className:"opacity-0 group-hover:opacity-60 hover:!opacity-100 text-stone-400 hover:text-red-500 transition flex-shrink-0","aria-label":"Delete item"},React.createElement(_t,{size:14}))))))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Donation total",value:Wt(s==null?void 0:s.donationsTotal)},{label:"Events booked",value:lt(s==null?void 0:s.eventsCount)},{label:"Sponsors",value:lt(s==null?void 0:s.sponsorsCount)},{label:"Volunteers",value:lt(s==null?void 0:s.volunteersCount)},{label:"Voicemails",value:"Voicemails"},{label:"Honeybook Messages",value:"Honeybook Messages"}].map(u=>u.label==="Voicemails"?React.createElement("button",{key:u.label,onClick:ee,className:"text-center bg-white rounded-2xl p-4 border border-stone-100 card-shadow block transition hover:-translate-y-0.5 hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-gold/60 relative","aria-label":"Open Voicemails"},React.createElement("div",{className:"font-display text-2xl text-ink mt-2"},u.value),React.createElement("div",{className:"absolute bottom-3 right-4 text-[10px] uppercase tracking-wide text-steel"},"Live sheet"),W&&React.createElement("div",{className:"absolute top-3 right-3 text-[10px] uppercase tracking-wide bg-gold text-white px-2 py-1 rounded-full"},"+1 New")):u.label==="Honeybook Messages"?React.createElement("button",{key:u.label,onClick:f,className:"text-center bg-white rounded-2xl p-4 border border-stone-100 card-shadow block transition hover:-translate-y-0.5 hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-gold/60 relative","aria-label":"Open Honeybook Messages"},React.createElement("div",{className:"font-display text-2xl text-ink mt-2"},u.value),React.createElement("div",{className:"absolute bottom-3 right-4 text-[10px] uppercase tracking-wide text-steel"},"Live sheet"),de&&React.createElement("div",{className:"absolute top-3 right-3 text-[10px] uppercase tracking-wide bg-gold text-white px-2 py-1 rounded-full"},"+1 New")):A[u.label]?React.createElement("a",{key:u.label,href:A[u.label],className:"bg-white rounded-2xl p-4 border border-stone-100 card-shadow block transition hover:-translate-y-0.5 hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-gold/60 relative","aria-label":`${u.label} details`},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.label),React.createElement("div",{className:"font-display text-2xl text-ink mt-2"},u.value),J[u.label]?React.createElement("div",{className:"absolute bottom-3 right-4 text-[10px] uppercase tracking-wide text-steel"},J[u.label]):null):React.createElement("div",{key:u.label,className:"bg-white rounded-2xl p-4 border border-stone-100 card-shadow relative"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.label),React.createElement("div",{className:"font-display text-2xl text-ink mt-2"},u.value),J[u.label]?React.createElement("div",{className:"absolute bottom-3 right-4 text-[10px] uppercase tracking-wide text-steel"},J[u.label]):null)))))};const Ms=()=>{const[s,o]=C("dashboard"),[r,S]=C(!0),Q=Ns(),[f,ee]=C({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[de,W]=C({Construction:null,Grounds:null,Interiors:null,Docents:null,Fundraising:null,Events:null,Marketing:null,Venue:null}),[_,K]=C(()=>qe(jt)||[]),[T,H]=C([]),[pe,z]=C(null),[A,J]=C(null),[u,d]=C(null),[P,F]=C(!1),[Y,we]=C({honeybook:null,voicemails:null}),[te,ie]=C({honeybook:!1,voicemails:!1}),Fe=nt.reduce((i,y)=>(i[y.key]={label:y.label,key:y.sheet},i),{}),he=i=>{K(i),$e(jt,i)},oe=i=>{const y={id:ys(),text:i,done:!1,createdAt:new Date().toISOString(),completedAt:""},b=[..._,y];he(b),j.saveMajorTodo(y)},Qe=i=>{const y=_.map(b=>{if(b.id!==i)return b;const h=g(p({},b),{done:!b.done,completedAt:b.done?"":new Date().toISOString()});return j.saveMajorTodo(h),h});he(y)},Be=i=>{const y=_.filter(b=>b.id!==i);he(y),j.deleteMajorTodo(i)};Le(()=>{Ce()},[]);const ke=()=>{try{const i=localStorage.getItem(Lt);return i?JSON.parse(i):{}}catch(i){return{}}},Ue=i=>{try{localStorage.setItem(Lt,JSON.stringify(i))}catch(y){console.warn("Failed to persist last seen timestamps:",y)}},Me=(i,y)=>{const b=ke(),h=g(p({},b),{[i]:y||new Date().toISOString()});Ue(h),ie(E=>g(p({},E),{[i]:!1}))},Ve=async()=>{if(j.isConfigured())try{const i=[Rt,$t].join(","),y=await fetch(`${X}?action=getSheetLastUpdated&ids=${encodeURIComponent(i)}`);if(!y.ok)throw new Error("Failed to fetch sheet updates");const b=await y.json();if(!b.success||!b.updated)return;const h=b.updated[Rt]||null,E=b.updated[$t]||null;we({honeybook:h,voicemails:E});const w=ke(),I=h&&(!w.honeybook||new Date(h)>new Date(w.honeybook)),R=E&&(!w.voicemails||new Date(E)>new Date(w.voicemails));ie({honeybook:!!I,voicemails:!!R})}catch(i){console.warn("Failed to check sheet updates:",i)}},Ce=async({useCache:i=!0}={})=>{var E;if(!it){S(!1);return}S(!0);const y=i?qe(Ft):null,b=i?qe(Mt):null,h=i?qe(rt):null;y&&ee(y),b&&W(b),h&&H(h);try{const w=await Promise.allSettled([j.fetchMetrics(),j.fetchSectionSnapshots(),j.fetchMajorTodos()]),[I,R,q]=w;I.status==="fulfilled"&&I.value&&(ee(I.value),$e(Ft,I.value)),R.status==="fulfilled"&&R.value&&(W(R.value),$e(Mt,R.value)),q.status==="fulfilled"&&((E=q.value)!=null&&E.length)&&he(q.value)}catch(w){console.error("Failed to load data:",w)}S(!1),setTimeout(async()=>{try{const w=await j.fetchQuarterlyUpdates();w.length&&(H(w),$e(rt,w))}catch(w){console.error("Failed to load quarterly updates:",w)}},0)};Le(()=>{if(s!=="dashboard")return;Ve();const i=setInterval(Ve,3600*1e3);return()=>clearInterval(i)},[s]);const O=async i=>{const E=i,{focusArea:y,quarter:b}=E,h=Tt(E,["focusArea","quarter"]);await j.submitReviewUpdate(i),H(w=>{const I=w.findIndex(ge=>ge.focusArea===y&&ge.quarter===b),R=I>=0?g(p({},w[I]),{payload:g(p({},w[I].payload||{}),{review:h})}):{focusArea:y,quarter:b,submittedDate:"",payload:{review:h}},q=I>=0?w.map((ge,be)=>be===I?R:ge):[...w,R];return $e(rt,q),q})},Se=(i,y)=>{const h=T.filter(R=>R.focusArea===i&&R.quarter===y).sort((R,q)=>new Date(q.submittedDate||q.createdAt)-new Date(R.submittedDate||R.createdAt))[0],E=(h==null?void 0:h.payload)||{},w=E.year||String(new Date().getFullYear()),I=E.submittedDate||(h==null?void 0:h.submittedDate)||new Date().toISOString().slice(0,10);z({focusArea:i,quarter:y,year:w,submittedDate:I,primaryFocus:E.primaryFocus||"",goals:E.goals&&E.goals.length?E.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:E.wins||"",challenges:E.challenges||{},supportNeeded:E.supportNeeded||"",supportTypes:E.supportTypes||{},decisionsNeeded:E.decisionsNeeded||"",nextQuarterFocus:E.nextQuarterFocus||"",nextPriorities:E.nextPriorities||["","",""],finalTallyOverview:E.finalTallyOverview||""}),o("quarterly"),window.scrollTo(0,0)},fe=(i,y,b,h)=>{if(y!=="Q1")return;const E=h.year||String(new Date().getFullYear()),w=h.submittedDate||(b==null?void 0:b.submittedDate)||new Date().toISOString().slice(0,10);J({areaLabel:i,quarter:y}),d({focusArea:i,quarter:y,year:E,submittedDate:w,primaryFocus:h.primaryFocus||"",goals:h.goals&&h.goals.length?h.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:h.wins||"",challenges:h.challenges||{},supportNeeded:h.supportNeeded||"",supportTypes:h.supportTypes||{},decisionsNeeded:h.decisionsNeeded||"",nextQuarterFocus:h.nextQuarterFocus||"",nextPriorities:h.nextPriorities||["","",""],finalTallyOverview:h.finalTallyOverview||"",uploadedFiles:h.uploadedFiles||[]})},_e=async()=>{if(u){F(!0);try{await j.submitQuarterlyUpdate(g(p({},u),{primaryOnly:!0})),await Ce({useCache:!1}),J(null),d(null)}catch(i){console.error("Failed to save inline quarterly update:",i),alert("Failed to save. Please try again.")}F(!1)}},Ze=async()=>{await Ce({useCache:!1}),z(null),o("dashboard")};return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full border border-gold/40 bg-white text-gold flex items-center justify-center shadow-sm"},React.createElement(Ht,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"Haley\u2019s Star Command"),React.createElement("div",{className:"text-xs text-steel"}))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"})),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("button",{onClick:()=>o("dashboard"),className:`tab-button text-sm min-w-[200px] ${s==="dashboard"?"active":""}`},"2026 Snapshot"),React.createElement("button",{onClick:()=>o("marketing"),className:`tab-button text-sm min-w-[200px] ${s==="marketing"?"active":""}`},"Marketing"),React.createElement("select",{value:nt.some(i=>i.key===s)?s:"",onChange:i=>{const y=i.target.value;y&&o(y)},className:"tab-button tab-select text-sm bg-white min-w-[220px]"},React.createElement("option",{value:""},"Operational Areas"),nt.map(i=>React.createElement("option",{key:i.key,value:i.key},i.label))))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},Q&&React.createElement("div",{className:"max-w-4xl mx-auto mb-6 rounded-2xl border border-amber-200 bg-amber-50 px-5 py-4 text-sm text-amber-800"},Q),r?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading Haley\u2019s Organized Chaos..."):React.createElement(React.Fragment,null,s==="dashboard"&&React.createElement(Fs,{metrics:f,majorTodos:_,onAddTodo:oe,onToggleTodo:Qe,onDeleteTodo:Be,onOpenHoneybook:()=>{Me("honeybook",Y.honeybook),o("honeybook"),window.scrollTo(0,0)},onOpenVoicemails:()=>{Me("voicemails",Y.voicemails),o("voicemails"),window.scrollTo(0,0)},unreadHoneybook:te.honeybook,unreadVoicemails:te.voicemails}),s==="marketing"&&React.createElement(Yt,null),s==="honeybook"&&React.createElement(Ds,{onBack:()=>o("dashboard")}),s==="voicemails"&&React.createElement(As,{onBack:()=>o("dashboard")}),["construction","grounds","interiors","docents","fund","events","marketing-ops","venue"].includes(s)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h2",{className:"font-display text-3xl text-ink"},Fe[s].label),React.createElement("div",{className:"flex items-center gap-2"})),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const i=de[Fe[s].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(i==null?void 0:i.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},i!=null&&i.budget?Wt(i.budget):"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(i==null?void 0:i.volunteers)||"N/A")))})())),(()=>{const i=Fe[s].label,y=[["Q1","Q2"],["Q3","Q4"]],b={Q1:"Jan 1 - Mar 31",Q2:"Apr 1 - Jun 30",Q3:"Jul 1 - Sep 30",Q4:"Oct 1 - Dec 31"},h={Q1:"Due: March 30th",Q2:"Due: June 30th",Q3:"Due: September 30th",Q4:"Due: December 31st"},E={capacity:"Capacity or volunteer limitations",budget:"Budget or funding constraints",scheduling:"Scheduling or timing issues",coordination:"Cross-area coordination gaps",external:"External factors",other:"Other"},w={staff:"Staff or volunteer help",marketing:"Marketing or communications",board:"Board guidance or decision",funding:"Funding or fundraising support",facilities:"Facilities or logistics",other:"Other"},I=D=>{switch(D){case"Q2":return"Q1";case"Q3":return"Q2";case"Q4":return"Q3";default:return null}},R=D=>T.filter(k=>k.focusArea===i&&k.quarter===D).sort((k,B)=>new Date(B.submittedDate||B.createdAt)-new Date(k.submittedDate||k.createdAt))[0],q=D=>{const M=U=>String(U||"").trim().toLowerCase()==="none noted",k=R(D),B=(k==null?void 0:k.payload)||{},N=I(D),$=N?R(N):null,Ne=($==null?void 0:$.payload)||{},re=(Ne.nextPriorities||[]).map(U=>({goal:U||"",status:"",summary:""})).filter(U=>String(U.goal||"").trim()&&!M(U.goal)),ne=B.goals&&B.goals.length?B.goals:re.length?re:[{},{},{}],le=B.primaryFocus||(M(Ne.nextQuarterFocus)?"":Ne.nextQuarterFocus),xe=(A==null?void 0:A.areaLabel)===i&&(A==null?void 0:A.quarter)===D,ce=B.submittedDate||(k==null?void 0:k.submittedDate)||"",Ee=D==="Q1";return React.createElement("div",{key:`primary-${D}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xl font-display text-ink"},`${D} Primary Focus and Goals`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},b[D])),xe?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("textarea",{value:(u==null?void 0:u.primaryFocus)||"",onChange:U=>d(se=>g(p({},se),{primaryFocus:U.target.value})),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"mt-2 space-y-3"},((u==null?void 0:u.goals)||[]).map((U,se)=>React.createElement("div",{key:se},React.createElement("input",{type:"text",value:U.goal,onChange:V=>d(De=>g(p({},De),{goals:De.goals.map((Je,We)=>We===se?g(p({},Je),{goal:V.target.value}):Je)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${se+1}`}))))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{J(null),d(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm",disabled:P},"Cancel"),React.createElement("button",{type:"button",onClick:_e,className:"px-3 py-2 bg-gold text-white rounded-lg text-sm",disabled:P},P?"Saving...":"Save"))):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("div",{className:"whitespace-pre-line"},le||"-")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"space-y-1"},ne.map((U,se)=>React.createElement("div",{key:se,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(Vt,{size:12})),React.createElement("div",null,React.createElement("span",null,U.goal||"-"))))))),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,ce?Qt(ce):"00-00-0000"),Ee&&React.createElement("button",{type:"button",onClick:()=>fe(i,D,k,B),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},ge=D=>{const M=R(D),k=(M==null?void 0:M.payload)||{},B=k.submittedDate||(M==null?void 0:M.submittedDate)||"",N=k.challenges||{},$=k.supportTypes||{},Ne=k.challengesChecked||"",re=k.supportTypesChecked||"",ne=Object.keys(E).filter(V=>N[V]).map(V=>V==="other"&&N.otherText?`Other: ${N.otherText}`:E[V]),le=Object.keys(w).filter(V=>$[V]).map(V=>V==="other"&&$.otherText?`Other: ${$.otherText}`:w[V]),xe=Ne||(ne.length?ne.join(", "):""),ce=re||(le.length?le.join(", "):""),U=(k.nextPriorities||[]).filter(V=>String(V||"").trim()),se=!!(k.wins||N.details||xe||k.supportNeeded||ce||k.nextQuarterFocus||U.length||k.decisionsNeeded);return React.createElement("div",{key:`overview-${D}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-lg font-display text-ink"},`${D} Quarterly Reflection`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},b[D])),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},h[D]))),!M||!se?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No submission yet."):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",{className:"whitespace-pre-line"},k.wins||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",{className:"whitespace-pre-line"},N.details||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges (checked)"),React.createElement("div",null,xe||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",{className:"whitespace-pre-line"},k.supportNeeded||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support types"),React.createElement("div",null,ce||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next quarter focus area and goals"),React.createElement("div",{className:"whitespace-pre-line"},k.nextQuarterFocus||"None noted"),React.createElement("div",{className:"mt-2 space-y-1"},U.length?U.map((V,De)=>React.createElement("div",{key:De,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(Vt,{size:12})),React.createElement("div",null,V||"-"))):React.createElement("div",null,"None noted"))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Other notes"),React.createElement("div",{className:"whitespace-pre-line"},k.decisionsNeeded||"None noted"))),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,B?Qt(B):"00-00-0000"),React.createElement("button",{type:"button",onClick:()=>Se(i,D),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},be=D=>{var B;const M=R(D),k=((B=M==null?void 0:M.payload)==null?void 0:B.review)||null;return React.createElement(Es,{key:`review-${D}`,areaLabel:i,quarter:D,review:k,onSave:O})};return React.createElement("div",{className:"mt-6 space-y-6"},y.map(D=>React.createElement("div",{key:D.join("-"),className:"space-y-6"},React.createElement("div",{className:"grid grid-cols-2 gap-4"},D.map(M=>q(M))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},D.map(M=>ge(M))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},D.map(M=>be(M))))))})()))))},js=ReactDOM.createRoot(document.getElementById("root"));js.render(React.createElement(Ms,null));})();
